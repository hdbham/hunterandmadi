<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    .test-result {
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
    }
    .pass {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .fail {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    .info {
      background-color: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
  </style>
</head>
<body>
  <h1>RSVP Form Test</h1>
  <div id="test-results"></div>
  
  <script>
    const results = [];
    
    function test(name, condition) {
      const passed = condition();
      results.push({ name, passed });
      const div = document.createElement('div');
      div.className = `test-result ${passed ? 'pass' : 'fail'}`;
      div.textContent = `${passed ? '✓' : '✗'} ${name}`;
      document.getElementById('test-results').appendChild(div);
      return passed;
    }
    
    function info(message) {
      const div = document.createElement('div');
      div.className = 'test-result info';
      div.textContent = `ℹ ${message}`;
      document.getElementById('test-results').appendChild(div);
    }
    
    // Load the main HTML file
    fetch('index.html')
      .then(response => response.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        
        // Test form structure
        test('Form element exists', () => {
          return doc.getElementById('rsvpForm') !== null;
        });
        
        test('Form has 3 steps', () => {
          const steps = doc.querySelectorAll('.form-step');
          return steps.length === 3;
        });
        
        test('Step 1: Ceremony attendance exists', () => {
          return doc.querySelector('.form-step[data-step="0"]') !== null;
        });
        
        test('Step 2: Attendees step exists', () => {
          return doc.querySelector('.form-step[data-step="1"]') !== null;
        });
        
        test('Step 3: Additional info step exists', () => {
          return doc.querySelector('.form-step[data-step="2"]') !== null;
        });
        
        test('Attendees container exists', () => {
          return doc.getElementById('attendees-container') !== null;
        });
        
        test('Add attendee button exists', () => {
          return doc.getElementById('addAttendeeBtn') !== null;
        });
        
        test('Navigation buttons exist', () => {
          return doc.getElementById('nextBtn') !== null &&
                 doc.getElementById('prevBtn') !== null &&
                 doc.getElementById('submitBtn') !== null;
        });
        
        test('Form message element exists', () => {
          return doc.getElementById('formMessage') !== null;
        });
        
        // Test JavaScript functions
        test('createAttendeeCard function exists in code', () => {
          return html.includes('function createAttendeeCard');
        });
        
        test('addAttendee function exists in code', () => {
          return html.includes('function addAttendee');
        });
        
        test('goToNextStep function exists in code', () => {
          return html.includes('function goToNextStep');
        });
        
        test('showStep function exists in code', () => {
          return html.includes('function showStep');
        });
        
        test('Form submission handler exists', () => {
          return html.includes('addEventListener') && html.includes('submit');
        });
        
        // Test form fields structure
        test('Attendee card has email field for first attendee', () => {
          return html.includes('attendee_email_${index}');
        });
        
        test('Attendee card has phone field for first attendee', () => {
          return html.includes('attendee_phone_${index}');
        });
        
        test('Attendee card has overnight stay fields', () => {
          return html.includes('arrival_${index}') &&
                 html.includes('sleeping_${index}') &&
                 html.includes('packing_list_${index}');
        });
        
        test('Attendee card has meal preference fields', () => {
          return html.includes('meals_${index}');
        });
        
        // Summary
        const passed = results.filter(r => r.passed).length;
        const total = results.length;
        info(`Tests passed: ${passed}/${total}`);
        
        if (passed === total) {
          info('All tests passed! Form structure looks good.');
        } else {
          info('Some tests failed. Please check the form structure.');
        }
      })
      .catch(error => {
        const div = document.createElement('div');
        div.className = 'test-result fail';
        div.textContent = `✗ Error loading form: ${error.message}`;
        document.getElementById('test-results').appendChild(div);
      });
  </script>
</body>
</html>

